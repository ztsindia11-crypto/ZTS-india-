**Bilkul! Main code 2 parts mein deta hoon!** üëç

---

## **PART 1 - PEHLA HALF (YEH COPY KARO):**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ZTS INDIA - Ultimate Indian-themed Battle Royale game with 7 unique characters, iconic locations, and intense survival gameplay!">
    <title>ZTS INDIA - Battle Royale Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        canvas {
            cursor: crosshair;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const FreeFireIndia = () => {
            const canvasRef = useRef(null);
            const [gameState, setGameState] = useState('characterSelect');
            const [selectedCharacter, setSelectedCharacter] = useState(null);
            const [score, setScore] = useState(0);
            const [kills, setKills] = useState(0);
            const gameLoopRef = useRef(null);

            const characters = [
                { id: 1, name: 'Tanjo', type: 'boy', color: '#ff6b6b', skill: 'Fast Runner' },
                { id: 2, name: 'Krishna', type: 'boy', color: '#4ecdc4', skill: 'Strong Fighter' },
                { id: 3, name: 'Iris', type: 'boy', color: '#45b7d1', skill: 'Sharp Shooter' },
                { id: 4, name: 'Devil', type: 'boy', color: '#f9ca24', skill: 'Quick Healer' },
                { id: 5, name: 'Kaira', type: 'girl', color: '#ff69b4', skill: 'Silent Mover' },
                { id: 6, name: 'Aurelia', type: 'girl', color: '#9b59b6', skill: 'Eagle Eye' },
                { id: 7, name: 'Elara', type: 'girl', color: '#e74c3c', skill: 'Medic Pro' }
            ];

            const locations = [
                { name: 'Taj Mahal', x: 200, y: 150, width: 100, height: 80, color: '#f5f5dc' },
                { name: 'Lal Qila', x: 500, y: 180, width: 120, height: 90, color: '#8B0000' },
                { name: 'Delhi House', x: 150, y: 400, width: 80, height: 70, color: '#CD853F' },
                { name: 'Mumbai Villa', x: 600, y: 420, width: 90, height: 75, color: '#DAA520' },
                { name: 'Bangalore Tower', x: 400, y: 350, width: 60, height: 100, color: '#708090' }
            ];

            const gameRef = useRef({
                player: { x: 400, y: 300, health: 100, armor: 0, speed: 3, angle: 0, ammo: 30, hasWeapon: false },
                enemies: [],
                bullets: [],
                particles: [],
                lootBoxes: [],
                safeZone: { x: 400, y: 300, radius: 380 },
                targetZone: { x: 400, y: 300, radius: 180 },
                shrinkTimer: 0,
                keys: {},
                mouse: { x: 0, y: 0 }
            });

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas) return;

                const handleKeyDown = (e) => {
                    gameRef.current.keys[e.key.toLowerCase()] = true;
                    if (e.key.toLowerCase() === 'r' && gameState === 'playing') {
                        pickupNearbyLoot();
                    }
                };

                const handleKeyUp = (e) => {
                    gameRef.current.keys[e.key.toLowerCase()] = false;
                };

                const handleMouseMove = (e) => {
                    const rect = canvas.getBoundingClientRect();
                    gameRef.current.mouse.x = e.clientX - rect.left;
                    gameRef.current.mouse.y = e.clientY - rect.top;
                };

                const handleClick = () => {
                    if (gameState === 'playing') {
                        shoot();
                    }
                };

                window.addEventListener('keydown', handleKeyDown);
                window.addEventListener('keyup', handleKeyUp);
                canvas.addEventListener('mousemove', handleMouseMove);
                canvas.addEventListener('click', handleClick);

                return () => {
                    window.removeEventListener('keydown', handleKeyDown);
                    window.removeEventListener('keyup', handleKeyUp);
                    canvas.removeEventListener('mousemove', handleMouseMove);
                    canvas.removeEventListener('click', handleClick);
                };
            }, [gameState]);

            const startGame = () => {
                if (!selectedCharacter) return;

                const game = gameRef.current;
                const char = characters.find(c => c.id === selectedCharacter);
                const speedBonus = char.skill === 'Fast Runner' ? 1 : 0;

                game.player = {
                    x: 400, y: 300, health: 100, armor: 0, speed: 3 + speedBonus,
                    angle: 0, ammo: 30, hasWeapon: true, character: char
                };
                game.enemies = [];
                game.bullets = [];
                game.particles = [];
                game.lootBoxes = [];
                game.safeZone = { x: 400, y: 300, radius: 380 };
                game.targetZone = { x: 400, y: 300, radius: 180 };
                game.shrinkTimer = 0;

                for (let i = 0; i < 10; i++) {
                    spawnLootBox();
                }

                for (let i = 0; i < 12; i++) {
                    spawnEnemy();
                }

                setScore(0);
                setKills(0);
                setGameState('playing');
            };

            const spawnLootBox = () => {
                const game = gameRef.current;
                game.lootBoxes.push({
                    x: Math.random() * 750 + 25,
                    y: Math.random() * 550 + 25,
                    type: Math.random() > 0.5 ? 'weapon' : 'armor'
                });
            };

            const pickupNearbyLoot = () => {
                const game = gameRef.current;
                const p = game.player;

                for (let i = game.lootBoxes.length - 1; i >= 0; i--) {
                    const box = game.lootBoxes[i];
                    if (Math.hypot(p.x - box.x, p.y - box.y) < 30) {
                        if (box.type === 'weapon') {
                            p.hasWeapon = true;
                            p.ammo += 20;
                        } else {
                            p.armor = Math.min(100, p.armor + 50);
                        }
                        game.lootBoxes.splice(i, 1);
                        createParticles(box.x, box.y, '#ffd700');
                    }
                }
            };

            const spawnEnemy = () => {
                const game = gameRef.current;
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 300 + 100;
                const enemyChar = characters[Math.floor(Math.random() * characters.length)];

                game.enemies.push({
                    x: 400 + Math.cos(angle) * distance,
                    y: 300 + Math.sin(angle) * distance,
                    health: 80,
                    armor: Math.random() > 0.5 ? 30 : 0,
                    speed: 1.2 + Math.random() * 0.5,
                    shootTimer: Math.random() * 60,
                    character: enemyChar
                });
            };

            const shoot = () => {
                const game = gameRef.current;
                const p = game.player;

                if (!p.hasWeapon || p.ammo <= 0) return;

                p.ammo--;
                const dx = game.mouse.x - p.x;
                const dy = game.mouse.y - p.y;
                const angle = Math.atan2(dy, dx);

                const accuracy = p.character.skill === 'Sharp Shooter' ? 10 : 8;

                game.bullets.push({
                    x: p.x,
                    y: p.y,
                    vx: Math.cos(angle) * accuracy,
                    vy: Math.sin(angle) * accuracy,
                    isPlayer: true
                });
            };

            const createParticles = (x, y, color) => {
                const game = gameRef.current;
                for (let i = 0; i < 10; i++) {
                    const angle = (Math.PI * 2 * i) / 10;
                    game.particles.push({
                        x, y,
                        vx: Math.cos(angle) * 3,
                        vy: Math.sin(angle) * 3,
                        life: 30,
                        color
                    });
                }
            };
            const updateGame = () => {
                const game = gameRef.current;
                const ctx = canvasRef.current?.getContext('2d');
                if (!ctx || gameState !== 'playing') return;

                ctx.fillStyle = '#2d5016';
                ctx.fillRect(0, 0, 800, 600);

                locations.forEach(loc => {
                    ctx.fillStyle = loc.color;
                    ctx.fillRect(loc.x, loc.y, loc.width, loc.height);
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(loc.x, loc.y, loc.width, loc.height);

                    ctx.fillStyle = '#000';
                    ctx.font = '10px Arial';
                    ctx.fillText(loc.name, loc.x + 5, loc.y - 5);

                    for (let i = 0; i < 3; i++) {
                        for (let j = 0; j < 2; j++) {
                            ctx.fillStyle = '#87ceeb';
                            ctx.fillRect(loc.x + 10 + i * 25, loc.y + 15 + j * 25, 15, 15);
                        }
                    }
                });

                game.shrinkTimer++;
                if (game.shrinkTimer > 180) {
                    game.safeZone.radius = Math.max(game.targetZone.radius, game.safeZone.radius - 0.3);

                    if (game.safeZone.radius <= game.targetZone.radius + 1) {
                        game.shrinkTimer = 0;
                        const angle = Math.random() * Math.PI * 2;
                        const distance = Math.random() * 80;
                        game.targetZone.x = 400 + Math.cos(angle) * distance;
                        game.targetZone.y = 300 + Math.sin(angle) * distance;
                        game.targetZone.radius = Math.max(100, game.targetZone.radius - 15);
                    }
                }

                ctx.strokeStyle = 'rgba(0, 120, 255, 0.4)';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.arc(game.safeZone.x, game.safeZone.y, game.safeZone.radius, 0, Math.PI * 2);
                ctx.stroke();

                ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.lineWidth = 2;
                ctx.setLineDash([8, 8]);
                ctx.beginPath();
                ctx.arc(game.targetZone.x, game.targetZone.y, game.targetZone.radius, 0, Math.PI * 2);
                ctx.stroke();
                ctx.setLineDash([]);

                game.lootBoxes.forEach(box => {
                    ctx.fillStyle = box.type === 'weapon' ? '#ffd700' : '#00ffff';
                    ctx.fillRect(box.x - 8, box.y - 8, 16, 16);
                    ctx.strokeStyle = '#000';
                    ctx.strokeRect(box.x - 8, box.y - 8, 16, 16);
                });

                const p = game.player;
                if (game.keys['w']) p.y -= p.speed;
                if (game.keys['s']) p.y += p.speed;
                if (game.keys['a']) p.x -= p.speed;
                if (game.keys['d']) p.x += p.speed;

                p.x = Math.max(20, Math.min(780, p.x));
                p.y = Math.max(20, Math.min(580, p.y));

                const dx = game.mouse.x - p.x;
                const dy = game.mouse.y - p.y;
                p.angle = Math.atan2(dy, dx);

                const distFromCenter = Math.hypot(p.x - game.safeZone.x, p.y - game.safeZone.y);
                if (distFromCenter > game.safeZone.radius) {
                    if (p.armor > 0) {
                        p.armor -= 0.3;
                    } else {
                        p.health -= 0.5;
                    }
                }

                game.enemies = game.enemies.filter(e => {
                    const dx = p.x - e.x;
                    const dy = p.y - e.y;
                    const dist = Math.hypot(dx, dy);

                    if (dist > 180) {
                        e.x += (dx / dist) * e.speed;
                        e.y += (dy / dist) * e.speed;
                    }

                    const enemyDistFromCenter = Math.hypot(e.x - game.safeZone.x, e.y - game.safeZone.y);
                    if (enemyDistFromCenter > game.safeZone.radius) {
                        if (e.armor > 0) {
                            e.armor -= 0.2;
                        } else {
                            e.health -= 0.4;
                        }
                    }

                    e.shootTimer--;
                    if (e.shootTimer <= 0 && dist < 350) {
                        const angle = Math.atan2(dy, dx);
                        game.bullets.push({
                            x: e.x,
                            y: e.y,
                            vx: Math.cos(angle) * 6,
                            vy: Math.sin(angle) * 6,
                            isPlayer: false
                        });
                        e.shootTimer = 90 + Math.random() * 60;
                    }

                    return e.health > 0;
                });

                game.bullets = game.bullets.filter(b => {
                    b.x += b.vx;
                    b.y += b.vy;

                    if (b.x < 0 || b.x > 800 || b.y < 0 || b.y > 600) return false;

                    if (b.isPlayer) {
                        for (let i = game.enemies.length - 1; i >= 0; i--) {
                            const e = game.enemies[i];
                            if (Math.hypot(b.x - e.x, b.y - e.y) < 18) {
                                const damage = 25;
                                if (e.armor > 0) {
                                    e.armor = Math.max(0, e.armor - damage / 2);
                                } else {
                                    e.health -= damage;
                                }
                                createParticles(e.x, e.y, '#ff0000');
                                if (e.health <= 0) {
                                    setKills(k => k + 1);
                                    setScore(s => s + 100);
                                    if (Math.random() > 0.7) spawnLootBox();
                                }
                                return false;
                            }
                        }
                    } else {
                        if (Math.hypot(b.x - p.x, b.y - p.y) < 18) {
                            const damage = 15;
                            if (p.armor > 0) {
                                p.armor = Math.max(0, p.armor - damage / 2);
                            } else {
                                p.health -= damage;
                            }
                            createParticles(p.x, p.y, '#ff0000');
                            return false;
                        }
                    }

                    return true;
                });

                game.particles = game.particles.filter(part => {
                    part.x += part.vx;
                    part.y += part.vy;
                    part.life--;
                    return part.life > 0;
                });

                game.particles.forEach(part => {
                    ctx.fillStyle = part.color;
                    ctx.globalAlpha = part.life / 30;
                    ctx.fillRect(part.x - 3, part.y - 3, 6, 6);
                });
                ctx.globalAlpha = 1;

                game.bullets.forEach(b => {
                    ctx.fillStyle = b.isPlayer ? '#ffff00' : '#ff4444';
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, 4, 0, Math.PI * 2);
                    ctx.fill();
                });

                game.enemies.forEach(e => {
                    ctx.save();
                    ctx.translate(e.x, e.y);
                    ctx.fillStyle = e.character.color;
                    ctx.beginPath();
                    ctx.arc(0, 0, 14, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    ctx.restore();

                    ctx.fillStyle = '#000';
                    ctx.fillRect(e.x - 20, e.y - 25, 40, 4);
                    ctx.fillStyle = '#ff0000';
                    ctx.fillRect(e.x - 20, e.y - 25, 40 * (e.health / 80), 4);

                    if (e.armor > 0) {
                        ctx.fillStyle = '#00ffff';
                        ctx.fillRect(e.x - 20, e.y - 30, 40 * (e.armor / 100), 3);
                    }
                });

                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.angle);
                ctx.fillStyle = p.character.color;
                ctx.beginPath();
                ctx.arc(0, 0, 16, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.stroke();

                if (p.hasWeapon) {
                    ctx.fillStyle = '#333';
                    ctx.fillRect(10, -3, 18, 6);
                }
                ctx.restore();

                ctx.fillStyle = '#000';
                ctx.fillRect(p.x - 25, p.y - 30, 50, 5);
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(p.x - 25, p.y - 30, 50 * (p.health / 100), 5);

                if (p.armor > 0) {
                    ctx.fillStyle = '#00ffff';
                    ctx.fillRect(p.x - 25, p.y - 36, 50 * (p.armor / 100), 4);
                }

                if (p.health <= 0) {
                    setGameState('gameOver');
                } else if (game.enemies.length === 0) {
                    setGameState('won');
                }
            };

            useEffect(() => {
                if (gameState === 'playing') {
                    gameLoopRef.current = setInterval(updateGame, 1000 / 60);
                } else {
                    if (gameLoopRef.current) clearInterval(gameLoopRef.current);
                }

                return () => {
                    if (gameLoopRef.current) clearInterval(gameLoopRef.current);
                };
            }, [gameState]);

            return (
                <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-orange-600 via-white to-green-600 p-4">
                    {gameState === 'characterSelect' && (
                        <div className="bg-black bg-opacity-90 p-8 rounded-2xl max-w-4xl">
                            <h1 className="text-5xl font-bold text-center mb-2 bg-gradient-to-r from-orange-500 via-white to-green-500 bg-clip-text text-transparent">
                                üáÆüá≥ ZTS INDIA üáÆüá≥
                            </h1>
                            <p className="text-white text-center mb-8 text-xl">Select Your Character</p>

                            <div className="grid grid-cols-4 gap-4 mb-8">
                                {characters.map(char => (
                                    <div
                                        key={char.id}
                                        onClick={() => setSelectedCharacter(char.id)}
                                        style={{
                                            cursor: 'pointer',
                                            padding: '1rem',
                                            borderRadius: '0.5rem',
                                            textAlign: 'center',
                                            transition: 'all 0.3s',
                                            transform: selectedCharacter === char.id ? 'scale(1.1)' : 'scale(1)',
                                            backgroundColor: selectedCharacter === char.id ? '#fbbf24' : '#374151',
                                            border: selectedCharacter === char.id ? '4px solid #fcd34d' : 'none'
                                        }}
                                    >
                                        <div
                                            style={{
                                                width: '4rem',
                                                height: '4rem',
                                                borderRadius: '50%',
                                                margin: '0 auto 0.5rem',
                                                backgroundColor: char.color
                                            }}
                                        />
                                        <p style={{ color: 'white', fontWeight: 'bold' }}>{char.name}</p>
                                        <p style={{ color: '#d1d5db', fontSize: '0.75rem' }}>{char.type}</p>
                                        <p style={{ color: '#fcd34d', fontSize: '0.75rem', marginTop: '0.25rem' }}>{char.skill}</p>
                                    </div>
                                ))}
                            </div>

                            <button
                                onClick={startGame}
                                disabled={!selectedCharacter}
                                style={{
                                    width: '100%',
                                    fontSize: '1.5rem',
                                    fontWeight: 'bold',
                                    padding: '1rem',
                                    borderRadius: '0.5rem',
                                    transition: 'all 0.3s',
                                    background: selectedCharacter ? 'linear-gradient(to right, #f97316, #16a34a)' : '#4b5563',
                                    color: selectedCharacter ? 'white' : '#9ca3af',
                                    cursor: selectedCharacter ? 'pointer' : 'not-allowed',
                                    border: 'none'
                                }}
                            >
                                {selectedCharacter ? 'üéÆ START BATTLE üéÆ' : 'SELECT A CHARACTER'}
                            </button>
                        </div>
                    )}

                    {gameState !== 'characterSelect' && (
                        <>
                            <div className="mb-4 flex gap-4 text-white flex-wrap justify-center">
                                <div className="flex items-center gap-2 bg-black bg-opacity-70 px-4 py-2 rounded-lg">
                                    <span className="font-bold">Score: {score}</span>
                                </div>
                                <div className="flex items-center gap-2 bg-black bg-opacity-70 px-4 py-2 rounded-lg">
                                    <span className="font-bold">Kills: {kills}</span>
                                </div>
                                <div className="flex items-center gap-2 bg-black bg-opacity-70 px-4 py-2 rounded-lg">
                                    <span className="font-bold">Enemies: {gameRef.current.enemies.length}</span>
                                </div>
                                <div className="flex items-center gap-2 bg-black bg-opacity-70 px-4 py-2 rounded-lg">
                                    <span className="font-bold">Ammo: {gameRef.current.player.ammo}</span>
                                </div>
                            </div>

                            <div style={{ position: 'relative' }}>
                                <canvas
                                    ref={canvasRef}
                                    width={800}
                                    height={600}
                                    style={{
                                        border: '4px solid #f97316',
                                        borderRadius: '0.5rem',
                                        boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                                    }}
                                />

                                {gameState === 'gameOver' && (
                                    <div style={{
                                        position: 'absolute',
                                        inset: 0,
                                        display: 'flex',
                                        flexDirection: 'column',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                        borderRadius: '0.5rem'
                                    }}>
                                        <h2 style={{ fontSize: '3rem', fontWeight: 'bold', color: '#ef4444', marginBottom: '1rem' }}>üíÄ ELIMINATED! üíÄ</h2>
                                        <p style={{ color: 'white', fontSize: '1.5rem', marginBottom: '0.5rem' }}>Final Score: {score}</p>
                                        <p style={{ color: 'white', fontSize: '1.25rem', marginBottom: '2rem' }}>Kills: {kills}</p>
                                        <button
                                            onClick={() => setGameState('characterSelect')}
                                            style={{
                                                backgroundColor: '#ef4444',
                                                color: 'white',
                                                fontWeight: 'bold',
                                                fontSize: '1.25rem',
                                                padding: '0.75rem 2.5rem',
                                                borderRadius: '0.5rem',
                                                border: 'none',
                                                cursor: 'pointer'
                                            }}
                                        >
                                            BACK TO LOBBY
                                        </button>
                                    </div>
                                )}

                                {gameState === 'won' && (
                                    <div style={{
                                        position: 'absolute',
                                        inset: 0,
                                        display: 'flex',
                                        flexDirection: 'column',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        backgroundColor: 'rgba(0, 0, 0, 0.9)',
                                        borderRadius: '0.5rem'
                                    }}>
                                        <div style={{ fontSize: '6rem', marginBottom: '1rem' }} className="animate-bounce">üèÜ</div>
                                        <h2 style={{ fontSize: '3rem', fontWeight: 'bold', color: '#fbbf24', marginBottom: '1rem' }}>üéâ BOOYAH! üéâ</h2>
                                        <p style={{ color: 'white', fontSize: '1.5rem', marginBottom: '0.5rem' }}>Final Score: {score}</p>
                                        <p style={{ color: 'white', fontSize: '1.25rem', marginBottom: '2rem' }}>Total Kills: {kills}</p>
                                        <button
                                            onClick={() => setGameState('characterSelect')}
                                            style={{
                                                backgroundColor: '#fbbf24',
                                                color: 'black',
                                                fontWeight: 'bold',
                                                fontSize: '1.25rem',
                                                padding: '0.75rem 2.5rem',
                                                borderRadius: '0.5rem',
                                                border: 'none',
                                                cursor: 'pointer'
         }}
                                        >
                                            PLAY AGAIN
                                        </button>
                                    </div>
                                )}
                            </div>

                            <div className="mt-4 text-white bg-black bg-opacity-70 px-6 py-3 rounded-lg">
                                <p style={{ textAlign: 'center' }}>
                                    <span style={{ fontWeight: 'bold' }}>Controls:</span> WASD - Move | Mouse - Aim | Click - Shoot | R - Pick Loot
                                </p>
                            </div>
                        </>
                    )}
                </div>
            );
        };

        ReactDOM.render(<FreeFireIndia />, document.getElementById('root'));
    </script>
</body>
</html>
!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ZTS INDIA - Ultimate Indian-themed Battle Royale with improved graphics!">
    <title>ZTS INDIA - Battle Royale Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: linear-gradient(to bottom, #87ceeb 0%, #87ceeb 60%, #2d5016 60%, #2d5016 100%);
        }
        canvas {
            cursor: crosshair;
            display: block;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(-25%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
        .india-gradient {
            background: linear-gradient(to right, #ff9933 0%, #ffffff 50%, #138808 100%);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const FreeFireIndia = () => {
            const canvasRef = useRef(null);
            const [gameState, setGameState] = useState('characterSelect');
            const [selectedCharacter, setSelectedCharacter] = useState(null);
            const [score, setScore] = useState(0);
            const [kills, setKills] = useState(0);
            const gameLoopRef = useRef(null);

            const characters = [
                { id: 1, name: 'Tanjo', type: 'boy', color: '#ff6b6b', skill: 'Fast Runner' },
                { id: 2, name: 'Krishna', type: 'boy', color: '#4ecdc4', skill: 'Strong Fighter' },
                { id: 3, name: 'Iris', type: 'boy', color: '#45b7d1', skill: 'Sharp Shooter' },
                { id: 4, name: 'Devil', type: 'boy', color: '#f9ca24', skill: 'Quick Healer' },
                { id: 5, name: 'Kaira', type: 'girl', color: '#ff69b4', skill: 'Silent Mover' },
                { id: 6, name: 'Aurelia', type: 'girl', color: '#9b59b6', skill: 'Eagle Eye' },
                { id: 7, name: 'Elara', type: 'girl', color: '#e74c3c', skill: 'Medic Pro' }
            ];

            const locations = [
                { name: 'Taj Mahal', x: 180, y: 130, width: 140, height: 110, color: '#f5f5dc', type: 'monument' },
                { name: 'Lal Qila', x: 480, y: 160, width: 160, height: 120, color: '#8B0000', type: 'fort' },
                { name: 'Delhi House', x: 130, y: 380, width: 100, height: 90, color: '#CD853F', type: 'house' },
                { name: 'Mumbai Villa', x: 580, y: 400, width: 110, height: 95, color: '#DAA520', type: 'villa' },
                { name: 'Bangalore Tower', x: 380, y: 330, width: 80, height: 130, color: '#708090', type: 'tower' }
            ];

            const gameRef = useRef({
                player: { x: 400, y: 300, health: 100, armor: 0, speed: 3, angle: 0, ammo: 30, hasWeapon: false },
                enemies: [],
                bullets: [],
                particles: [],
                lootBoxes: [],
                trees: [],
                safeZone: { x: 400, y: 300, radius: 380 },
                targetZone: { x: 400, y: 300, radius: 180 },
                shrinkTimer: 0,
                keys: {},
                mouse: { x: 0, y: 0 }
            });

            // Generate trees for decoration
            const generateTrees = () => {
                const game = gameRef.current;
                game.trees = [];
                for (let i = 0; i < 20; i++) {
                    game.trees.push({
                        x: Math.random() * 760 + 20,
                        y: Math.random() * 560 + 20,
                        size: Math.random() * 15 + 10
                    });
                }
            };

            useEffect(() => {
                const canvas = canvasRef.current;
                if (!canvas) return;

                generateTrees();

                const handleKeyDown = (e) => {
                    gameRef.current.keys[e.key.toLowerCase()] = true;
                    if (e.key.toLowerCase() === 'r' && gameState === 'playing') {
                        pickupNearbyLoot();
                    }
                };

                const handleKeyUp = (e) => {
                    gameRef.current.keys[e.key.toLowerCase()] = false;
                };

                const handleMouseMove = (e) => {
                    const rect = canvas.getBoundingClientRect();
                    gameRef.current.mouse.x = e.clientX - rect.left;
                    gameRef.current.mouse.y = e.clientY - rect.top;
                };

                const handleClick = () => {
                    if (gameState === 'playing') {
                        shoot();
                    }
                };

                window.addEventListener('keydown', handleKeyDown);
                window.addEventListener('keyup', handleKeyUp);
                canvas.addEventListener('mousemove', handleMouseMove);
                canvas.addEventListener('click', handleClick);

                return () => {
                    window.removeEventListener('keydown', handleKeyDown);
                    window.removeEventListener('keyup', handleKeyUp);
                    canvas.removeEventListener('mousemove', handleMouseMove);
                    canvas.removeEventListener('click', handleClick);
                };
            }, [gameState]);

            const startGame = () => {
                if (!selectedCharacter) return;

                const game = gameRef.current;
                const char = characters.find(c => c.id === selectedCharacter);
                const speedBonus = char.skill === 'Fast Runner' ? 1 : 0;

                game.player = {
                    x: 400, y: 300, health: 100, armor: 0, speed: 3 + speedBonus,
                    angle: 0, ammo: 30, hasWeapon: true, character: char
                };
                game.enemies = [];
                game.bullets = [];
                game.particles = [];
                game.lootBoxes = [];
                game.safeZone = { x: 400, y: 300, radius: 380 };
                game.targetZone = { x: 400, y: 300, radius: 180 };
                game.shrinkTimer = 0;

                for (let i = 0; i < 10; i++) {
                    spawnLootBox();
                }

                for (let i = 0; i < 12; i++) {
                    spawnEnemy();
                }

                setScore(0);
                setKills(0);
                setGameState('playing');
            };

            const spawnLootBox = () => {
                const game = gameRef.current;
                game.lootBoxes.push({
                    x: Math.random() * 750 + 25,
                    y: Math.random() * 550 + 25,
                    type: Math.random() > 0.5 ? 'weapon' : 'armor',
                    rotation: 0
                });
            };

            const pickupNearbyLoot = () => {
                const game = gameRef.current;
                const p = game.player;

                for (let i = game.lootBoxes.length - 1; i >= 0; i--) {
                    const box = game.lootBoxes[i];
                    if (Math.hypot(p.x - box.x, p.y - box.y) < 30) {
                        if (box.type === 'weapon') {
                            p.hasWeapon = true;
                            p.ammo += 20;
                        } else {
                            p.armor = Math.min(100, p.armor + 50);
                        }
                        game.lootBoxes.splice(i, 1);
                        createParticles(box.x, box.y, '#ffd700');
                    }
                }
            };

            const spawnEnemy = () => {
                const game = gameRef.current;
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 300 + 100;
                const enemyChar = characters[Math.floor(Math.random() * characters.length)];

                game.enemies.push({
                    x: 400 + Math.cos(angle) * distance,
                    y: 300 + Math.sin(angle) * distance,
                    health: 80,
                    armor: Math.random() > 0.5 ? 30 : 0,
                    speed: 1.2 + Math.random() * 0.5,
                    shootTimer: Math.random() * 60,
                    character: enemyChar
                });
            };

            const shoot = () => {
                const game = gameRef.current;
                const p = game.player;

                if (!p.hasWeapon || p.ammo <= 0) return;

                p.ammo--;
                const dx = game.mouse.x - p.x;
                const dy = game.mouse.y - p.y;
                const angle = Math.atan2(dy, dx);

                const accuracy = p.character.skill === 'Sharp Shooter' ? 10 : 8;

                game.bullets.push({
                    x: p.x,
                    y: p.y,
                    vx: Math.cos(angle) * accuracy,
                    vy: Math.sin(angle) * accuracy,
                    isPlayer: true,
                    trail: []
                });
            };

            const createParticles = (x, y, color) => {
                const game = gameRef.current;
                for (let i = 0; i < 15; i++) {
                    const angle = (Math.PI * 2 * i) / 15;
                    game.particles.push({
                        x, y,
                        vx: Math.cos(angle) * 4,
                        vy: Math.sin(angle) * 4,
                        life: 40,
                        color,
                        size: Math.random() * 4 + 2
                    });
                }
            };

            const drawBuilding = (ctx, loc) => {
                const { x, y, width, height, color, name, type } = loc;

                // Shadow
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.fillRect(x + 5, y + 5, width, height);

                // Main building
                ctx.fillStyle = color;
                ctx.fillRect(x, y, width, height);

                // Building details based on type
                if (type === 'monument') {
                    // Taj Mahal style - dome
                    ctx.fillStyle = '#ffffff';
                    ctx.beginPath();
                    ctx.arc(x + width/2, y + 20, 25, Math.PI, 0);
                    ctx.fill();
                    
                    // Minarets
                    ctx.fillStyle = '#f5f5dc';
                    ctx.fillRect(x + 10, y, 15, height);
                    ctx.fillRect(x + width - 25, y, 15, height);
                    
                    // Tops
                    ctx.beginPath();
                    ctx.arc(x + 17, y, 8, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.beginPath();
                    ctx.arc(x + width - 17, y, 8, 0, Math.PI * 2);
                    ctx.fill();
                    
                } else if (type === 'fort') {
                    // Lal Qila style - walls
                    ctx.strokeStyle = '#600000';
                    ctx.lineWidth = 3;
                    ctx.strokeRect(x, y, width, height);
                    
                    // Battlements
                    for (let i = 0; i < 5; i++) {
                        ctx.fillStyle = '#600000';
                        ctx.fillRect(x + i * (width/5), y - 8, width/6, 8);
                    }
                    
                    // Gate
                    ctx.fillStyle = '#4a0000';
                    ctx.fillRect(x + width/2 - 20, y + height - 40, 40, 40);
                    
                } else {
                    // Regular building - windows
                    for (let i = 0; i < 3; i++) {
                        for (let j = 0; j < Math.floor(height/30); j++) {
                            ctx.fillStyle = '#87ceeb';
                            ctx.fillRect(x + 15 + i * 30, y + 15 + j * 30, 20, 20);
                            ctx.strokeStyle = '#000';
                            ctx.lineWidth = 1;
                            ctx.strokeRect(x + 15 + i * 30, y + 15 + j * 30, 20, 20);
                        }
                    }
                }

                // Building outline
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.strokeRect(x, y, width, height);

                // Name label with background
                ctx.fillStyle = 'rgba(0,0,0,0.7)';
                ctx.fillRect(x, y - 22, ctx.measureText(name).width + 10, 18);
                ctx.fillStyle = '#ffd700';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(name, x + 5, y - 7);
            };
const updateGame = () => {
                const game = gameRef.current;
                const ctx = canvasRef.current?.getContext('2d');
                if (!ctx || gameState !== 'playing') return;

                // Enhanced background - sky and ground
                const skyGradient = ctx.createLinearGradient(0, 0, 0, 300);
                skyGradient.addColorStop(0, '#87ceeb');
                skyGradient.addColorStop(1, '#b0e0e6');
                ctx.fillStyle = skyGradient;
                ctx.fillRect(0, 0, 800, 300);

                // Ground with grass texture
                const groundGradient = ctx.createLinearGradient(0, 300, 0, 600);
                groundGradient.addColorStop(0, '#4a7c2e');
                groundGradient.addColorStop(0.5, '#3d6b26');
                groundGradient.addColorStop(1, '#2d5016');
                ctx.fillStyle = groundGradient;
                ctx.fillRect(0, 300, 800, 300);

                // Grass patches for texture
                ctx.fillStyle = 'rgba(74, 124, 46, 0.3)';
                for (let i = 0; i < 50; i++) {
                    const x = (i * 73) % 800;
                    const y = 300 + (i * 43) % 300;
                    ctx.fillRect(x, y, 15, 3);
                }

                // Draw trees
                game.trees.forEach(tree => {
                    // Tree shadow
                    ctx.fillStyle = 'rgba(0,0,0,0.2)';
                    ctx.beginPath();
                    ctx.ellipse(tree.x, tree.y + tree.size, tree.size * 0.6, tree.size * 0.3, 0, 0, Math.PI * 2);
                    ctx.fill();

                    // Tree trunk
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(tree.x - tree.size * 0.15, tree.y - tree.size, tree.size * 0.3, tree.size);

                    // Tree foliage
                    ctx.fillStyle = '#228B22';
                    ctx.beginPath();
                    ctx.arc(tree.x, tree.y - tree.size * 0.8, tree.size * 0.8, 0, Math.PI * 2);
                    ctx.fill();

                    // Highlight
                    ctx.fillStyle = 'rgba(144, 238, 144, 0.5)';
                    ctx.beginPath();
                    ctx.arc(tree.x - tree.size * 0.3, tree.y - tree.size * 1.2, tree.size * 0.4, 0, Math.PI * 2);
                    ctx.fill();
                });

                // Draw buildings with improved graphics
                locations.forEach(loc => drawBuilding(ctx, loc));

                // Safe zone shrinking logic
                game.shrinkTimer++;
                if (game.shrinkTimer > 180) {
                    game.safeZone.radius = Math.max(game.targetZone.radius, game.safeZone.radius - 0.3);

                    if (game.safeZone.radius <= game.targetZone.radius + 1) {
                        game.shrinkTimer = 0;
                        const angle = Math.random() * Math.PI * 2;
                        const distance = Math.random() * 80;
                        game.targetZone.x = 400 + Math.cos(angle) * distance;
                        game.targetZone.y = 300 + Math.sin(angle) * distance;
                        game.targetZone.radius = Math.max(100, game.targetZone.radius - 15);
                    }
                }

                // Draw safe zones with glow effect
                ctx.shadowBlur = 20;
                ctx.shadowColor = 'rgba(0, 120, 255, 0.5)';
                ctx.strokeStyle = 'rgba(0, 120, 255, 0.6)';
                ctx.lineWidth = 5;
                ctx.beginPath();
                ctx.arc(game.safeZone.x, game.safeZone.y, game.safeZone.radius, 0, Math.PI * 2);
                ctx.stroke();
                ctx.shadowBlur = 0;

                ctx.strokeStyle = 'rgba(255, 255, 255, 0.4)';
                ctx.lineWidth = 3;
                ctx.setLineDash([10, 10]);
                ctx.beginPath();
                ctx.arc(game.targetZone.x, game.targetZone.y, game.targetZone.radius, 0, Math.PI * 2);
                ctx.stroke();
                ctx.setLineDash([]);

                // Enhanced loot boxes
                game.lootBoxes.forEach(box => {
                    box.rotation += 0.02;
                    
                    ctx.save();
                    ctx.translate(box.x, box.y);
                    ctx.rotate(box.rotation);
                    
                    // Glow effect
                    ctx.shadowBlur = 15;
                    ctx.shadowColor = box.type === 'weapon' ? '#ffd700' : '#00ffff';
                    
                    // Box with gradient
                    const gradient = ctx.createLinearGradient(-10, -10, 10, 10);
                    gradient.addColorStop(0, box.type === 'weapon' ? '#ffd700' : '#00ffff');
                    gradient.addColorStop(1, box.type === 'weapon' ? '#ff8c00' : '#0099cc');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(-10, -10, 20, 20);
                    
                    ctx.shadowBlur = 0;
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(-10, -10, 20, 20);
                    
                    // Icon
                    ctx.fillStyle = '#000';
                    ctx.font = 'bold 16px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(box.type === 'weapon' ? 'üî´' : 'üõ°Ô∏è', 0, 0);
                    
                    ctx.restore();
                });

                // Player movement
                const p = game.player;
                if (game.keys['w']) p.y -= p.speed;
                if (game.keys['s']) p.y += p.speed;
                if (game.keys['a']) p.x -= p.speed;
                if (game.keys['d']) p.x += p.speed;

                p.x = Math.max(20, Math.min(780, p.x));
                p.y = Math.max(20, Math.min(580, p.y));

                const dx = game.mouse.x - p.x;
                const dy = game.mouse.y - p.y;
                p.angle = Math.atan2(dy, dx);

                const distFromCenter = Math.hypot(p.x - game.safeZone.x, p.y - game.safeZone.y);
                if (distFromCenter > game.safeZone.radius) {
                    if (p.armor > 0) {
                        p.armor -= 0.3;
                    } else {
                        p.health -= 0.5;
                    }
                }

                // Enemy AI
                game.enemies = game.enemies.filter(e => {
                    const dx = p.x - e.x;
                    const dy = p.y - e.y;
                    const dist = Math.hypot(dx, dy);

                    if (dist > 180) {
                        e.x += (dx / dist) * e.speed;
                        e.y += (dy / dist) * e.speed;
                    }

                    const enemyDistFromCenter = Math.hypot(e.x - game.safeZone.x, e.y - game.safeZone.y);
                    if (enemyDistFromCenter > game.safeZone.radius) {
                        if (e.armor > 0) {
                            e.armor -= 0.2;
                        } else {
                            e.health -= 0.4;
                        }
                    }

                    e.shootTimer--;
                    if (e.shootTimer <= 0 && dist < 350) {
                        const angle = Math.atan2(dy, dx);
                        game.bullets.push({
                            x: e.x,
                            y: e.y,
                            vx: Math.cos(angle) * 6,
                            vy: Math.sin(angle) * 6,
                            isPlayer: false,
                            trail: []
                        });
                        e.shootTimer = 90 + Math.random() * 60;
                    }

                    return e.health > 0;
                });

                // Bullets with trails
                game.bullets = game.bullets.filter(b => {
                    b.trail.push({ x: b.x, y: b.y });
                    if (b.trail.length > 5) b.trail.shift();

                    b.x += b.vx;
                    b.y += b.vy;

                    if (b.x < 0 || b.x > 800 || b.y < 0 || b.y > 600) return false;

                    if (b.isPlayer) {
                        for (let i = game.enemies.length - 1; i >= 0; i--) {
                            const e = game.enemies[i];
                            if (Math.hypot(b.x - e.x, b.y - e.y) < 18) {
                                const damage = 25;
                                if (e.armor > 0) {
                                    e.armor = Math.max(0, e.armor - damage / 2);
                                } else {
                                    e.health -= damage;
                                }
                                createParticles(e.x, e.y, '#ff0000');
                                if (e.health <= 0) {
                                    setKills(k => k + 1);
                                    setScore(s => s + 100);
                                    createParticles(e.x, e.y, '#ffd700');
                                    if (Math.random() > 0.7) spawnLootBox();
                                }
                                return false;
                            }
                        }
                    } else {
                        if (Math.hypot(b.x - p.x, b.y - p.y) < 18) {
                            const damage = 15;
                            if (p.armor > 0) {
                                p.armor = Math.max(0, p.armor - damage / 2);
                            } else {
                                p.health -= damage;
                            }
                            createParticles(p.x, p.y, '#ff0000');
                            return false;
                        }
                    }

                    return true;
                });

                // Enhanced particles
                game.particles = game.particles.filter(part => {
                    part.x += part.vx;
                    part.y += part.vy;
                    part.vx *= 0.95;
                    part.vy *= 0.95;
                    part.life--;
                    return part.life > 0;
                });

                game.particles.forEach(part => {
                    ctx.fillStyle = part.color;
                    ctx.globalAlpha = part.life / 40;
                    ctx.beginPath();
                    ctx.arc(part.x, part.y, part.size, 0, Math.PI * 2);
                    ctx.fill();
                });
                ctx.globalAlpha = 1;

                // Draw bullet trails
                game.bullets.forEach(b => {
                    b.trail.forEach((pos, i) => {
                        ctx.fillStyle = b.isPlayer ? `rgba(255, 255, 0, ${i / 5})` : `rgba(255, 68, 68, ${i / 5})`;
                        ctx.beginPath();
                        ctx.arc(pos.x, pos.y, 3 - i * 0.4, 0, Math.PI * 2);
                        ctx.fill();
                    });

                    ctx.shadowBlur = 8;
                    ctx.shadowColor = b.isPlayer ? '#ffff00' : '#ff4444';
                    ctx.fillStyle = b.isPlayer ? '#ffff00' : '#ff4444';
                    ctx.beginPath();
                    ctx.arc(b.x, b.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.shadowBlur = 0;
                });

                // Enhanced enemies
                game.enemies.forEach(e => {
                    // Enemy shadow
                    ctx.fillStyle = 'rgba(0,0,0,0.3)';
                    ctx.beginPath();
                    ctx.ellipse(e.x, e.y + 18, 14, 6, 0, 0, Math.PI * 2);
                    ctx.fill();

                    // Enemy body with gradient
                    const enemyGradient = ctx.createRadialGradient(e.x, e.y, 0, e.x, e.y, 16);
                    enemyGradient.addColorStop(0, e.character.color);
                    enemyGradient.addColorStop(1, '#000');
                    
                    ctx.fillStyle = enemyGradient;
                    ctx.beginPath();
                    ctx.arc(e.x, e.y, 16, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 3;
                    ctx.stroke();

                    // Health bar background
                    ctx.fillStyle = 'rgba(0,0,0,0.5)';
                    ctx.fillRect(e.x - 22, e.y - 28, 44, 6);
                    
                    // Health bar
                    ctx.fillStyle = '#ff0000';
                    ctx.fillRect(e.x - 20, e.y - 26, 40, 4);
                    ctx.fillStyle = '#00ff00';
                    ctx.fillRect(e.x - 20, e.y - 26, 40 * (e.health / 80), 4);

                    // Armor bar
                    if (e.armor > 0) {
                        ctx.fillStyle = '#00ffff';
                        ctx.fillRect(e.x - 20, e.y - 31, 40 * (e.armor / 100), 3);
                    }
                });

                // Enhanced player
                // Player shadow
                ctx.fillStyle = 'rgba(0,0,0,0.4)';
                ctx.beginPath();
                ctx.ellipse(p.x, p.y + 20, 16, 7, 0, 0, Math.PI * 2);
                ctx.fill();

                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.angle);
                
                // Player body with gradient
                const playerGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 18);
                playerGradient.addColorStop(0, p.character.color);
                playerGradient.addColorStop(1, '#000');
                
                ctx.fillStyle = playerGradient;
                ctx.beginPath();
                ctx.arc(0, 0, 18, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = '#ffd700';
                ctx.lineWidth = 4;
                ctx.stroke();

                // Weapon
                if (p.hasWeapon) {
                    ctx.fillStyle = '#333';
                    ctx.fillRect(12, -4, 22, 8);
                    ctx.fillStyle = '#666';
                    ctx.fillRect(32, -3, 4, 6);
                }
                ctx.restore();

                // Player health bar background
                ctx.fillStyle = 'rgba(0,0,0,0.5)';
                ctx.fillRect(p.x - 27, p.y - 33, 54, 7);
                
                // Health bar
                ctx.fillStyle = '#ff0000';
                ctx.fillRect(p.x - 25, p.y - 31, 50, 5);
                ctx.fillStyle = '#00ff00';
                ctx.fillRect(p.x - 25, p.y - 31, 50 * (p.health / 100), 5);

                // Armor bar
                if (p.armor > 0) {
                    ctx.fillStyle = '#00ffff';
                    ctx.fillRect(p.x - 25, p.y - 37, 50 * (p.armor / 100), 4);
                }

                // Game over conditions
                if (p.health <= 0) {
                    setGameState('gameOver');
                } else if (game.enemies.length === 0) {
                    setGameState('won');
                }
            };

            useEffect(() => {
                if (gameState === 'playing') {
                    gameLoopRef.current = setInterval(updateGame, 1000 / 60);
                } else {
                    if (gameLoopRef.current) clearInterval(gameLoopRef.current);
                }

                return () => {
                    if (gameLoopRef.current) clearInterval(gameLoopRef.current);
                };
            }, [gameState]);

            return (
                <div className="flex flex-col items-center justify-center min-h-screen india-gradient p-4">
                    {gameState === 'characterSelect' && (
                        <div className="bg-black bg-opacity-90 p-8 rounded-2xl max-w-4xl border-4 border-yellow-500">
                            <h1 className="text-6xl font-bold text-center mb-3 india-gradient bg-clip-text text-transparent" style={{WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent'}}>
                                üáÆüá≥ ZTS INDIA üáÆüá≥
                            </h1>
                            <p className="text-yellow-400 text-center mb-2 text-sm">IMPROVED GRAPHICS VERSION</p>
                            <p className="text-white text-center mb-8 text-xl">Select Your Character</p>

                            <div className="grid grid-cols-4 gap-4 mb-8">
                                {characters.map(char => (
                                    <div
                                        key={char.id}
                                        onClick={() => setSelectedCharacter(char.id)}
                                        style={{
                                            cursor: 'pointer',
                                            padding: '1rem',
                                            borderRadius: '0.5rem',
                                            textAlign: 'center',
                                            transition: 'all 0.3s',
                                            transform: selectedCharacter === char.id ? 'scale(1.1)' : 'scale(1)',
                                            backgroundColor: selectedCharacter === char.id ? '#fbbf24' : '#374151',
                                            border: selectedCharacter === char.id ? '4px solid #fcd34d' : 'none',
                                            boxShadow: selectedCharacter === char.id ? '0 0 20px rgba(251, 191, 36, 0.5)' : 'none'
                                        }}
                                    >
                                        <div
                                            style={{
                                                width: '4rem',
                                                height: '4rem',
                                                borderRadius: '50%',
                                                margin: '0 auto 0.5rem',
                                                backgroundColor: char.color,
                                                border: '3px solid #000',
                                                boxShadow: `0 0 15px ${char.color}`
                                            }}
                                        />
                                        <p style={{ color: 'white', fontWeight: 'bold' }}>{char.name}</p>
                                        <p style={{ color: '#d1d5db', fontSize: '0.75rem' }}>{char.type}</p>
                                        <p style={{ color: '#fcd34d', fontSize: '0.75rem', marginTop: '0.25rem' }}>‚ö° {char.skill}</p>
                                    </div>
                                ))}
                            </div>

                            <button
                                onClick={startGame}
                                disabled={!selectedCharacter}
                                style={{
                                    width: '100%',
                                    fontSize: '1.5rem',
                                    fontWeight: 'bold',
                                    padding: '1rem',
                                    borderRadius: '0.5rem',
                                    transition: 'all 0.3s',
                                    background: selectedCharacter ? 'linear-gradient(to right, #f97316, #16a34a)' : '#4b5563',
                                    color: selectedCharacter ? 'white' : '#9ca3af',
                                    cursor: selectedCharacter ? 'pointer' : 'not-allowed',
                                    border: 'none',
                                    boxShadow: selectedCharacter ? '0 0 20px rgba(249, 115, 22, 0.5)' : 'none'
                                }}
                            >
                                {selectedCharacter ? 'üéÆ START BATTLE üéÆ' : 'SELECT A CHARACTER'}
                            </button>
                        </div>
                    )}
    {gameState !== 'characterSelect' && (
                        <>
                            <div className="mb-4 flex gap-4 text-white flex-wrap justify-center">
                                <div className="flex items-center gap-2 bg-black bg-opacity-80 px-5 py-3 rounded-lg border-2 border-yellow-500">
                                    <span className="text-yellow-400">üèÜ</span>
                                    <span className="font-bold">Score: {score}</span>
                                </div>
                                <div className="flex items-center gap-2 bg-black bg-opacity-80 px-5 py-3 rounded-lg border-2 border-red-500">
                                    <span className="text-red-400">üíÄ</span>
                                    <span className="font-bold">Kills: {kills}</span>
                                </div>
                                <div className="flex items-center gap-2 bg-black bg-opacity-80 px-5 py-3 rounded-lg border-2 border-blue-500">
                                    <span className="text-blue-400">üë•</span>
                                    <span className="font-bold">Enemies: {gameRef.current.enemies.length}</span>
                                </div>
                                <div className="flex items-center gap-2 bg-black bg-opacity-80 px-5 py-3 rounded-lg border-2 border-green-500">
                                    <span className="text-green-400">üî´</span>
                                    <span className="font-bold">Ammo: {gameRef.current.player.ammo}</span>
                                </div>
                            </div>

                            <div style={{ position: 'relative' }}>
                                <canvas
                                    ref={canvasRef}
                                    width={800}
                                    height={600}
                                    style={{
                                        border: '4px solid #f97316',
                                        borderRadius: '0.5rem',
                                        boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.5)'
                                    }}
                                />

                                {gameState === 'gameOver' && (
                                    <div style={{
                                        position: 'absolute',
                                        inset: 0,
                                        display: 'flex',
                                        flexDirection: 'column',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        backgroundColor: 'rgba(0, 0, 0, 0.95)',
                                        borderRadius: '0.5rem'
                                    }}>
                                        <h2 style={{ fontSize: '3.5rem', fontWeight: 'bold', color: '#ef4444', marginBottom: '1rem', textShadow: '0 0 20px #ef4444' }}>üíÄ ELIMINATED! üíÄ</h2>
                                        <p style={{ color: 'white', fontSize: '1.5rem', marginBottom: '0.5rem' }}>Final Score: <span style={{color: '#fbbf24'}}>{score}</span></p>
                                        <p style={{ color: 'white', fontSize: '1.25rem', marginBottom: '2rem' }}>Kills: <span style={{color: '#ef4444'}}>{kills}</span></p>
                                        <button
                                            onClick={() => setGameState('characterSelect')}
                                            style={{
                                                backgroundColor: '#ef4444',
                                                color: 'white',
                                                fontWeight: 'bold',
                                                fontSize: '1.25rem',
                                                padding: '0.75rem 2.5rem',
                                                borderRadius: '0.5rem',
                                                border: 'none',
                                                cursor: 'pointer',
                                                boxShadow: '0 0 20px rgba(239, 68, 68, 0.5)'
                                            }}
                                        >
                                            BACK TO LOBBY
                                        </button>
                                    </div>
                                )}

                                {gameState === 'won' && (
                                    <div style={{
                                        position: 'absolute',
                                        inset: 0,
                                        display: 'flex',
                                        flexDirection: 'column',
                                        alignItems: 'center',
                                        justifyContent: 'center',
                                        backgroundColor: 'rgba(0, 0, 0, 0.95)',
                                        borderRadius: '0.5rem'
                                    }}>
                                        <div style={{ fontSize: '7rem', marginBottom: '1rem' }} className="animate-bounce">üèÜ</div>
                                        <h2 style={{ fontSize: '3.5rem', fontWeight: 'bold', color: '#fbbf24', marginBottom: '1rem', textShadow: '0 0 20px #fbbf24' }}>üéâ BOOYAH! üéâ</h2>
                                        <p style={{ color: 'white', fontSize: '1.5rem', marginBottom: '0.5rem' }}>Final Score: <span style={{color: '#fbbf24'}}>{score}</span></p>
                                        <p style={{ color: 'white', fontSize: '1.25rem', marginBottom: '2rem' }}>Total Kills: <span style={{color: '#ef4444'}}>{kills}</span></p>
                                        <button
                                            onClick={() => setGameState('characterSelect')}
                                            style={{
                                                backgroundColor: '#fbbf24',
                                                color: 'black',
                                                fontWeight: 'bold',
                                                fontSize: '1.25rem',
                                                padding: '0.75rem 2.5rem',
                                                borderRadius: '0.5rem',
                                                border: 'none',
                                                cursor: 'pointer',
                                                boxShadow: '0 0 20px rgba(251, 191, 36, 0.5)'
                                            }}
                                        >
                                            PLAY AGAIN
                                        </button>
                                    </div>
                                )}
                            </div>

                            <div className="mt-4 text-white bg-black bg-opacity-80 px-6 py-3 rounded-lg border-2 border-yellow-500">
                                <p style={{ textAlign: 'center' }}>
                                    <span style={{ fontWeight: 'bold', color: '#fbbf24' }}>Controls:</span> WASD - Move | Mouse - Aim | Click - Shoot | R - Pick Loot
                                </p>
                            </div>
                        </>
                    )}
                </div>
            );
        };

        ReactDOM.render(<FreeFireIndia />, document.getElementById('root'));
    </script>
</body>
</html>
